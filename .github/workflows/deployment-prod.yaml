# ...top part unchanged...

            echo "üì¶ Setting up Python .venv..."
            if [ -d ".venv" ]; then
              rm -rf .venv
            fi
            python3 -m venv .venv
            . .venv/bin/activate

            export S3_BUCKET_NAME="maisa-polybot-images"
            pip install --upgrade pip
            pip install -r torch-requirements.txt
            pip install -r requirements.txt
            pip install opencv-python numpy boto3

            # ...rest unchanged...

            echo "‚öôÔ∏è Enabling and starting yolo.service"
            sudo mv ~/yolo.service /etc/systemd/system/yolo.service
            sudo systemctl daemon-reload
            sudo systemctl enable yolo.service
            sudo systemctl restart yolo.service

            echo "‚è± Waiting for service health check..."
            for i in {1..10}; do
              STATUS=\$(curl -s -o /dev/null -w "%{http_code}" http://localhost:8080/health)
              if [ "\$STATUS" == "200" ]; then
                echo "‚úÖ Health check passed."
                break
              fi
              echo "‚åõ Health check attempt \$i failed (code \$STATUS), retrying in 5s..."
              sleep 5
            done

            STATUS=\$(curl -s -o /dev/null -w "%{http_code}" http://localhost:8080/health)
            if [ "\$STATUS" != "200" ]; then
              echo "‚ùå Health check failed. Showing logs:"
              journalctl -u yolo.service -n 30 --no-pager
              exit 1
            fi

            echo "‚úÖ Production YOLO deployment complete."
